import{A as j,E as w,a as h,r as u,c as O,j as s,y as f,z as y,R as x,Q as n,S as D,K as m,W as L,O as T,H as A,B as R,F as C,h as F,i as H}from"./index-1473f838.js";const W=async o=>(await j.post(w.SEND_OTP,{email:o})).data,_=async o=>(await j.post(w.RESET_PASSWORD,o)).data,I=()=>{const{isLoading:o,mutateAsync:p}=h(m.SEND_OTP,W),{isLoading:d,mutateAsync:v}=h(m.RESET_PASSWORD,_),[c,P]=u.useState({step1:!0,step2:!1}),[a,S]=u.useState({email:"",newPassword:"",otp:""}),b=O(),g=(e,t)=>{S(r=>({...r,[e]:t.target.value}))},E=()=>{if(!x.EMAIL.test(a.email)){n.error("Please enter valid email address");return}p(a.email).then(e=>{if(e.status===200){n.success(e==null?void 0:e.message),P({step1:!1,step2:!0});return}throw new Error(e==null?void 0:e.error)}).catch(e=>{var t,r,i,l;return n.error((r=(t=e.response)==null?void 0:t.data)!=null&&r.error?(l=(i=e.response)==null?void 0:i.data)==null?void 0:l.error:"Unable to send OTP right now!")})},N=()=>{if(!x.PASSWORD.test(a.newPassword)){n.error("Please enter a valid 8 characters new password containing both alphabets and numbers");return}if(!x.OTP.test(a.otp)){n.error("Please enter a valid OTP");return}v(a).then(e=>{if(e.status===200){n.success(e==null?void 0:e.message),b(D.LOGIN);return}throw new Error(e==null?void 0:e.error)}).catch(e=>{var t,r,i,l;return n.error((r=(t=e.response)==null?void 0:t.data)!=null&&r.error?(l=(i=e.response)==null?void 0:i.data)==null?void 0:l.error:"Unable to reset password right now!")})};return s.jsx("div",{className:"login-register-area section-padding-1 pt-100 pb-100",children:s.jsx("div",{className:"container",children:s.jsx("div",{className:"row",children:s.jsxs("div",{className:"login-register-wrap mr-70",children:[s.jsxs("h3",{children:[s.jsx(f,{icon:y})," Forgot Password?"]}),s.jsxs("div",{className:"login-register-form",children:[c.step1?s.jsxs("div",{className:"sin-login-register",children:[s.jsxs("label",{children:["Email address ",s.jsx("span",{children:"*"})]}),s.jsx("input",{type:"text",value:a.email,onChange:g.bind(void 0,"email"),maxLength:50})]}):null,c.step2?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"sin-login-register",children:[s.jsxs("label",{children:["New Password ",s.jsx("span",{children:"*"})]}),s.jsx("input",{type:"password",value:a.newPassword,onChange:g.bind(void 0,"newPassword"),maxLength:50})]}),s.jsxs("div",{className:"sin-login-register",children:[s.jsxs("label",{children:["OTP ",s.jsx("span",{children:"*"})]}),s.jsx("input",{type:"text",value:a.otp.slice(0,6),onChange:g.bind(void 0,"otp"),maxLength:6})]})]}):null,s.jsx("div",{className:"login-register-btn-remember",children:s.jsx("div",{className:"login-register-btn",children:s.jsx("button",{type:"button",onClick:o||d?void 0:c.step1?E:N,children:o||d?s.jsx("div",{className:"loading-spinner"}):c.step1?"Send OTP":"Reset"})})})]})]})})})})},B=()=>s.jsxs(L,{children:[s.jsx(T,{}),s.jsx(A,{}),s.jsx(R,{title:"Forgot Password"}),s.jsx(I,{}),s.jsx(C,{}),s.jsx(F,{}),s.jsx(H,{})]});export{B as default};
